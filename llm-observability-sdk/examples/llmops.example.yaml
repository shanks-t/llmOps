# =============================================================================
# LLMOps SDK Configuration Example
# =============================================================================
# Copy this file to llmops.yaml and customize for your environment.
#
# All ${VAR_NAME} patterns are substituted with environment variable values.
# In strict mode, missing env vars raise errors. In permissive mode, they
# become empty strings with a warning.

# -----------------------------------------------------------------------------
# Service Configuration (required)
# -----------------------------------------------------------------------------
service:
  name: my-service                    # Required: identifies your service in traces
  version: "1.0.0"                    # Optional: service version for trace metadata

# -----------------------------------------------------------------------------
# Arize Telemetry Configuration (required)
# -----------------------------------------------------------------------------
arize:
  # Required: OTLP endpoint for trace export
  # For Arize cloud: https://otlp.arize.com/v1/traces
  # For Phoenix local: http://localhost:6006/v1/traces
  # For self-hosted Arize: https://arize-app.your-cluster.internal/v1/traces
  endpoint: ${ARIZE_ENDPOINT}

  # Optional: Arize authentication (required for Arize cloud)
  space_id: ${ARIZE_SPACE_ID}
  api_key: ${ARIZE_API_KEY}

  # Optional: Project name for organizing traces in Arize
  project_name: ${ARIZE_PROJECT_NAME}

  # Optional: Transport protocol (default: "http")
  # - "http": HTTP/HTTPS transport (recommended, works with most proxies/firewalls)
  # - "grpc": gRPC transport (requires opentelemetry-exporter-otlp-proto-grpc)
  transport: http

  # Optional: Span processor mode (default: true)
  # - true: BatchSpanProcessor (non-blocking, recommended for production)
  # - false: SimpleSpanProcessor (blocking, useful for development/debugging)
  batch_spans: true

  # Optional: Debug mode - log spans to console (default: false)
  # Useful during development to see what spans are being created
  debug: false

  # Optional: TLS certificate for self-hosted HTTPS endpoints
  # Path can be relative (resolved from this config file) or absolute
  # See "TLS Setup for Self-Hosted Arize" section below
  # certificate_file: ./certs/arize-ca.pem

# -----------------------------------------------------------------------------
# Auto-Instrumentation Configuration (optional)
# -----------------------------------------------------------------------------
instrumentation:
  google_adk: true      # Enable Google ADK instrumentation (default: true)
  google_genai: true    # Enable Google GenAI instrumentation (default: true)

# -----------------------------------------------------------------------------
# Validation Configuration (optional)
# -----------------------------------------------------------------------------
validation:
  # Mode options:
  # - "strict": Raise errors for missing env vars, invalid config, missing cert files
  # - "permissive": Log warnings and continue with defaults (default)
  mode: permissive


# =============================================================================
# TLS Setup for Self-Hosted Arize (HTTPS with Self-Signed Certificate)
# =============================================================================
#
# If your self-hosted Arize uses a self-signed certificate, you need to provide
# the certificate file so the SDK can verify the server's identity.
#
# PREREQUISITE: Extract the certificate from your Arize endpoint
# ---------------------------------------------------------------
# Run this command once to extract the server certificate:
#
#   echo | openssl s_client -showcerts -connect <your-arize-host>:443 -prexit > ./certs/arize-ca.pem
#
# Example:
#   mkdir -p ./certs
#   echo | openssl s_client -showcerts -connect arize-app.my-cluster.internal:443 -prexit > ./certs/arize-ca.pem
#
# Then reference it in your config:
#
#   arize:
#     endpoint: https://arize-app.my-cluster.internal/v1/traces
#     certificate_file: ./certs/arize-ca.pem   # Relative to this config file
#
# Alternative: Use environment variable
# -------------------------------------
# You can also set the certificate path via environment variable:
#
#   export OTEL_EXPORTER_OTLP_CERTIFICATE=/path/to/arize-ca.pem
#
# The SDK will use this if certificate_file is not specified in config.


# =============================================================================
# Example Configurations
# =============================================================================

# -----------------------------------------------------------------------------
# Example: Local Development with Phoenix
# -----------------------------------------------------------------------------
# service:
#   name: my-llm-app
#   version: "0.1.0"
#
# arize:
#   endpoint: http://localhost:6006/v1/traces
#   transport: http
#   batch_spans: false      # Use SimpleSpanProcessor for immediate span export
#   debug: true             # Log spans to console for debugging
#
# instrumentation:
#   google_adk: true
#   google_genai: true
#
# validation:
#   mode: permissive

# -----------------------------------------------------------------------------
# Example: Production with Arize Cloud
# -----------------------------------------------------------------------------
# service:
#   name: production-llm-service
#   version: "2.0.0"
#
# arize:
#   endpoint: https://otlp.arize.com/v1/traces
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: ${ARIZE_PROJECT_NAME}
#   transport: http
#   batch_spans: true
#   debug: false
#
# instrumentation:
#   google_adk: true
#   google_genai: true
#
# validation:
#   mode: strict

# -----------------------------------------------------------------------------
# Example: Self-Hosted Arize with TLS Certificate
# -----------------------------------------------------------------------------
# service:
#   name: secure-llm-service
#   version: "1.0.0"
#
# arize:
#   endpoint: https://arize-app.my-cluster.internal/v1/traces
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: my-project
#   certificate_file: ./certs/arize-ca.pem   # Relative path from this config file
#   transport: http
#   batch_spans: true
#
# validation:
#   mode: strict

# -----------------------------------------------------------------------------
# Example: Minimal Configuration
# -----------------------------------------------------------------------------
# service:
#   name: my-app
#
# arize:
#   endpoint: http://localhost:6006/v1/traces


# =============================================================================
# Environment Variables Reference
# =============================================================================
#
# | Variable                        | Used For                              |
# |---------------------------------|---------------------------------------|
# | LLMOPS_CONFIG_PATH              | Default config file path if not passed |
# | ARIZE_SPACE_ID                  | Arize authentication                  |
# | ARIZE_API_KEY                   | Arize authentication                  |
# | ARIZE_ENDPOINT                  | OTLP endpoint URL                     |
# | ARIZE_PROJECT_NAME              | Project name in Arize                 |
# | OTEL_EXPORTER_OTLP_CERTIFICATE  | Fallback for certificate_file         |
#
# Example .env file:
# ------------------
# ARIZE_ENDPOINT=https://arize-app.my-cluster.internal/v1/traces
# ARIZE_SPACE_ID=your-space-id
# ARIZE_API_KEY=your-api-key
# ARIZE_PROJECT_NAME=my-project
# OTEL_EXPORTER_OTLP_CERTIFICATE=/path/to/certs/arize-ca.pem
