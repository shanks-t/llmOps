# =============================================================================
# LLMOps SDK Configuration Example
# =============================================================================
# Copy this file to llmops.yaml and customize for your environment.
#
# All ${VAR_NAME} patterns are substituted with environment variable values.
# In strict mode, missing env vars raise errors. In permissive mode, they
# become empty strings with a warning.

# -----------------------------------------------------------------------------
# Service Configuration (required)
# -----------------------------------------------------------------------------
service:
  name: my-service                    # Required: identifies your service in traces
  version: "1.0.0"                    # Optional: service version for trace metadata

# -----------------------------------------------------------------------------
# Arize Telemetry Configuration (required)
# -----------------------------------------------------------------------------
arize:
  # Required: OTLP endpoint for trace export
  # For Arize cloud: https://otlp.arize.com/v1/traces
  # For Phoenix local: http://localhost:6006/v1/traces
  # For self-hosted Arize: https://arize-otlp.your-cluster.internal/v1/traces
  endpoint: ${ARIZE_ENDPOINT}

  # Optional: Arize authentication (required for Arize cloud)
  space_id: ${ARIZE_SPACE_ID}
  api_key: ${ARIZE_API_KEY}

  # Optional: Project name for organizing traces in Arize
  project_name: ${ARIZE_PROJECT_NAME}

  # Optional: Transport protocol (default: "http")
  # - "http": HTTP/HTTPS transport (recommended, works with most proxies/firewalls)
  # - "grpc": gRPC transport (requires opentelemetry-exporter-otlp-proto-grpc)
  transport: http

  # Optional: Span processor mode (default: true)
  # - true: BatchSpanProcessor (non-blocking, recommended for production)
  # - false: SimpleSpanProcessor (blocking, useful for development/debugging)
  batch_spans: true

  # Optional: Debug mode - log spans to console (default: false)
  # Useful during development to see what spans are being created
  debug: false

  # Optional: TLS certificate configuration for self-hosted deployments
  # These can also be set via standard OTEL environment variables:
  #   - OTEL_EXPORTER_OTLP_CERTIFICATE
  #   - OTEL_EXPORTER_OTLP_CLIENT_KEY
  #   - OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE
  #
  # certificate_file: /path/to/ca-bundle.pem        # CA cert for server verification
  # client_key_file: /path/to/client-key.pem       # Client private key (mTLS)
  # client_certificate_file: /path/to/client.pem   # Client certificate (mTLS)

  # Optional: TracerProvider creation mode (default: true)
  # - true: Use arize.otel.register if arize-otel package is installed
  # - false: Always use manual OTLP setup
  use_arize_otel: true

# -----------------------------------------------------------------------------
# Auto-Instrumentation Configuration (optional)
# -----------------------------------------------------------------------------
instrumentation:
  google_adk: true      # Enable Google ADK instrumentation (default: true)
  google_genai: true    # Enable Google GenAI instrumentation (default: true)

# -----------------------------------------------------------------------------
# Privacy Configuration (optional)
# -----------------------------------------------------------------------------
privacy:
  capture_content: false    # Capture LLM input/output content (default: false)

# -----------------------------------------------------------------------------
# Validation Configuration (optional)
# -----------------------------------------------------------------------------
validation:
  # Mode options:
  # - "strict": Raise errors for missing env vars, invalid config, missing cert files
  # - "permissive": Log warnings and continue with defaults (default)
  mode: permissive


# =============================================================================
# Example Configurations
# =============================================================================
# Below are example configurations for common scenarios. Uncomment and modify
# as needed, or use as reference for your own configuration.

# -----------------------------------------------------------------------------
# Example: Local Development with Phoenix
# -----------------------------------------------------------------------------
# service:
#   name: my-llm-app
#   version: "0.1.0"
#
# arize:
#   endpoint: http://localhost:6006/v1/traces
#   transport: http
#   batch_spans: false      # Use SimpleSpanProcessor for immediate span export
#   debug: true             # Log spans to console for debugging
#   use_arize_otel: false   # Phoenix doesn't need arize.otel
#
# instrumentation:
#   google_adk: true
#   google_genai: true
#
# validation:
#   mode: permissive

# -----------------------------------------------------------------------------
# Example: Production with Arize Cloud
# -----------------------------------------------------------------------------
# service:
#   name: production-llm-service
#   version: "2.0.0"
#
# arize:
#   endpoint: https://otlp.arize.com/v1/traces
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: ${ARIZE_PROJECT_NAME}
#   transport: http         # HTTP is reliable through most corporate proxies
#   batch_spans: true       # Non-blocking batch export for production
#   debug: false
#   use_arize_otel: true    # Use arize.otel.register
#
# instrumentation:
#   google_adk: true
#   google_genai: true
#
# privacy:
#   capture_content: false  # Don't log sensitive content in production
#
# validation:
#   mode: strict            # Fail fast on configuration errors

# -----------------------------------------------------------------------------
# Example: Self-Hosted Arize AX with TLS Certificate (.pem file)
# -----------------------------------------------------------------------------
# For self-hosted Arize AX deployments that use enterprise-issued certificates
# or self-signed certificates, you need to provide the CA certificate.
#
# To extract the certificate from your endpoint:
#   echo | openssl s_client -showcerts -connect arize-otlp.my-cluster.internal:443 > cert.pem
#
# service:
#   name: secure-llm-service
#   version: "1.0.0"
#
# arize:
#   # Self-hosted Arize AX endpoint (single endpoint mode from v10.4.0+)
#   endpoint: https://arize-app.my-cluster.internal/v1/traces
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: my-project
#
#   # TLS: CA certificate for server verification
#   # This .pem file contains the root CA that signed your cluster's certificate
#   certificate_file: /etc/ssl/certs/my-cluster-ca.pem
#
#   # Alternatively, set via environment variable:
#   # export OTEL_EXPORTER_OTLP_CERTIFICATE=/etc/ssl/certs/my-cluster-ca.pem
#
#   transport: http
#   batch_spans: true
#   use_arize_otel: true    # SDK bridges certificate_file to OTEL env vars
#
# validation:
#   mode: strict

# -----------------------------------------------------------------------------
# Example: Self-Hosted Arize AX with mTLS (Mutual TLS)
# -----------------------------------------------------------------------------
# For deployments requiring client certificate authentication.
#
# service:
#   name: mtls-llm-service
#   version: "1.0.0"
#
# arize:
#   endpoint: https://arize-otlp.my-cluster.internal/v1/traces
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: my-project
#
#   # TLS certificates for mTLS
#   certificate_file: /etc/ssl/certs/cluster-ca.pem           # CA cert
#   client_key_file: /etc/ssl/private/client-key.pem          # Client private key
#   client_certificate_file: /etc/ssl/certs/client-cert.pem   # Client certificate
#
#   transport: http
#   batch_spans: true
#
# validation:
#   mode: strict

# -----------------------------------------------------------------------------
# Example: Self-Hosted with Four-Endpoint Configuration (Legacy)
# -----------------------------------------------------------------------------
# Older Arize AX deployments may use four separate endpoints.
#
# service:
#   name: legacy-llm-service
#   version: "1.0.0"
#
# arize:
#   # Use the OTLP-specific endpoint for traces
#   endpoint: https://arize-otlp.my-cluster.internal/v1/traces
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: my-project
#   certificate_file: /etc/ssl/certs/cluster-ca.pem
#   transport: http
#
# validation:
#   mode: strict

# -----------------------------------------------------------------------------
# Example: gRPC Transport (requires additional dependency)
# -----------------------------------------------------------------------------
# gRPC transport may offer better performance but requires:
#   pip install opentelemetry-exporter-otlp-proto-grpc
#
# service:
#   name: grpc-llm-service
#   version: "1.0.0"
#
# arize:
#   endpoint: https://arize-app.my-cluster.internal/v1
#   space_id: ${ARIZE_SPACE_ID}
#   api_key: ${ARIZE_API_KEY}
#   project_name: my-project
#   certificate_file: /etc/ssl/certs/cluster-ca.pem
#   transport: grpc         # Use gRPC transport
#   batch_spans: true
#
# validation:
#   mode: strict

# -----------------------------------------------------------------------------
# Example: Minimal Configuration
# -----------------------------------------------------------------------------
# service:
#   name: my-app
#
# arize:
#   endpoint: http://localhost:6006/v1/traces


# =============================================================================
# Environment Variables Reference
# =============================================================================
# The SDK reads these environment variables:
#
# | Variable                             | Used For                                    |
# |--------------------------------------|---------------------------------------------|
# | LLMOPS_CONFIG_PATH                   | Default config file path if not passed      |
# | ARIZE_SPACE_ID                       | Arize authentication                        |
# | ARIZE_API_KEY                        | Arize authentication                        |
# | ARIZE_ENDPOINT                       | OTLP endpoint URL                           |
# | ARIZE_PROJECT_NAME                   | Project name in Arize                       |
# | OTEL_EXPORTER_OTLP_CERTIFICATE       | Fallback for certificate_file               |
# | OTEL_EXPORTER_OTLP_CLIENT_KEY        | Fallback for client_key_file                |
# | OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE| Fallback for client_certificate_file        |
#
# Example .env file for self-hosted Arize AX:
# -------------------------------------------
# ARIZE_ENDPOINT=https://arize-app.my-cluster.internal/v1/traces
# ARIZE_SPACE_ID=your-space-id
# ARIZE_API_KEY=your-api-key
# ARIZE_PROJECT_NAME=my-project
# OTEL_EXPORTER_OTLP_CERTIFICATE=/etc/ssl/certs/cluster-ca.pem
